<!DOCTYPE html>
<html lang="de_DE">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß" />
  <meta name="date" content="2015-08-25" />
  <title>JSKOS API Specification</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
/*]]>*/
  </style>
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
  <link rel="stylesheet" href="makespec.css" />
</head>
<body>
<a href="https://github.com/gbv/jskos-api"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">JSKOS API Specification</h1>
<h3 class="author">Jakob Voß</h3>
<h4 class="date">2015-08-25 (version +15)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#synopsis"><span class="toc-section-number">1.1</span> Synopsis</a></li>
<li><a href="#status-of-this-document"><span class="toc-section-number">1.2</span> Status of this document</a></li>
<li><a href="#conformance-requirements"><span class="toc-section-number">1.3</span> Conformance requirements</a></li>
</ul></li>
<li><a href="#request-and-response-format"><span class="toc-section-number">2</span> Request and response format</a><ul>
<li><a href="#request"><span class="toc-section-number">2.1</span> Request</a></li>
<li><a href="#request-headers"><span class="toc-section-number">2.2</span> Request headers</a></li>
<li><a href="#response-body"><span class="toc-section-number">2.3</span> Response body</a></li>
<li><a href="#response-headers"><span class="toc-section-number">2.4</span> Response headers</a></li>
<li><a href="#description-documents"><span class="toc-section-number">2.5</span> Description Documents</a></li>
<li><a href="#error-responses"><span class="toc-section-number">2.6</span> Error responses</a></li>
</ul></li>
<li><a href="#endpoints"><span class="toc-section-number">3</span> Endpoints</a><ul>
<li><a href="#concepts"><span class="toc-section-number">3.1</span> Concepts</a></li>
<li><a href="#schemes"><span class="toc-section-number">3.2</span> Schemes</a></li>
<li><a href="#types"><span class="toc-section-number">3.3</span> Types</a></li>
<li><a href="#mappings"><span class="toc-section-number">3.4</span> Mappings</a></li>
</ul></li>
<li><a href="#query-modifiers"><span class="toc-section-number">4</span> Query modifiers</a><ul>
<li><a href="#properties"><span class="toc-section-number">4.1</span> Properties</a></li>
<li><a href="#pagination"><span class="toc-section-number">4.2</span> Pagination</a></li>
<li><a href="#mediated-result-lists"><span class="toc-section-number">4.3</span> Mediated result lists</a></li>
<li><a href="#jskos-expansion-and-normalization"><span class="toc-section-number">4.4</span> JSKOS expansion and normalization</a></li>
</ul></li>
<li><a href="#extensions"><span class="toc-section-number">5</span> Extensions</a><ul>
<li><a href="#truncation"><span class="toc-section-number">5.1</span> Truncation</a></li>
<li><a href="#normalization"><span class="toc-section-number">5.2</span> Normalization</a></li>
<li><a href="#utility-endpoints"><span class="toc-section-number">5.3</span> Utility endpoints</a></li>
<li><a href="#restricted-access"><span class="toc-section-number">5.4</span> Restricted access</a></li>
<li><a href="#search-suggestions"><span class="toc-section-number">5.5</span> Search suggestions</a></li>
<li><a href="#reconciliation-service"><span class="toc-section-number">5.6</span> Reconciliation service</a></li>
<li><a href="#range-search"><span class="toc-section-number">5.7</span> Range search</a></li>
<li><a href="#geospatial-search"><span class="toc-section-number">5.8</span> Geospatial search</a></li>
</ul></li>
<li><a href="#references"><span class="toc-section-number">6</span> References</a><ul>
<li><a href="#normative-references"><span class="toc-section-number">6.1</span> Normative References</a></li>
<li><a href="#informative-references"><span class="toc-section-number">6.2</span> Informative References</a></li>
<li><a href="#revision-history"><span class="toc-section-number">6.3</span> Revision history</a></li>
</ul></li>
</ul>
</nav>
<section id="introduction" class="level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This document specified <strong>JSKOS API</strong>, an experimental JSON-API to access controlled vocabularies, also known as knowledge organization systems, or taxonomies, expressed in <a href="http://gbv.github.io/jskos/">JSKOS</a> format.</p>
<section id="synopsis" class="level2">
<h2><span class="header-section-number">1.1</span> Synopsis</h2>
<p>A JSKOS API consists of a base URL and a set of request endpoints to query <a href="#concept-endpoint">concepts</a>, <a href="#schemes-endpoint">concept schemes</a>, <a href="#types-endpoint">concept types</a>, and [concept mappings] with HTTP GET requests.</p>
</section>
<section id="status-of-this-document" class="level2">
<h2><span class="header-section-number">1.2</span> Status of this document</h2>
<p><em>The current version of JSKOS API specification is a very early draft!</em></p>
<p>The specification is hosted in a public git repository at <a href="https://github.com/gbv/jskos-api">https://github.com/gbv/jskos-api</a>. Comments and contributions are welcome!</p>
<p>JSKOS API is being defined as part of project <a href="https://coli-conc.gbv.de">coli-conc</a>.</p>
</section>
<section id="conformance-requirements" class="level2">
<h2><span class="header-section-number">1.3</span> Conformance requirements</h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>
</section>
</section>
<section id="request-and-response-format" class="level1">
<h1><span class="header-section-number">2</span> Request and response format</h1>
<section id="request" class="level2">
<h2><span class="header-section-number">2.1</span> Request</h2>
<ul>
<li>HTTPS GET, HEAD, OPTIONS requests only (a later version may also support write operations)</li>
<li>support CORS and optionally JSONP (<code>callback</code> parameter)</li>
</ul>
<p>Core endpoints:</p>
<ul>
<li><code>/concepts</code></li>
<li><code>/schemes</code></li>
<li><code>/types</code></li>
<li><code>/mappings</code></li>
</ul>
<p>A JSKOS API endpoint MAY support <a href="#utility-endpoints">additional endpoints</a> which can all be implemented based on the core endpoints.</p>
<p>Each URL query parameters is one of</p>
<ul>
<li>query parameter of some kind (text, URI, numeric, geospatial…)</li>
<li><a href="#query-modifiers">query modifier</a></li>
</ul>
</section>
<section id="request-headers" class="level2">
<h2><span class="header-section-number">2.2</span> Request headers</h2>
<p>…</p>
</section>
<section id="response-body" class="level2">
<h2><span class="header-section-number">2.3</span> Response body</h2>
<p>All HTTP responses MUST be valid JSON.</p>
<ul>
<li>based on <a href="http://gbv.github.io/jskos/">JSKOS</a> format</li>
<li>SHOULD pretty-print JSON and gzip compression supported by default.</li>
</ul>
<p>Possible response types include:</p>
<ul>
<li>[description document]</li>
<li>JSKOS object or list of JSKOS objects</li>
<li><a href="#error-responses">error response</a></li>
</ul>
</section>
<section id="response-headers" class="level2">
<h2><span class="header-section-number">2.4</span> Response headers</h2>
<p>A JSKOS API MUST support the following HTTP response headers:</p>
<dl>
<dt>Content-Type</dt>
<dd>The value <code>application/json</code> or <code>application/json; charset=utf-8</code> for JSON response; the value <code>application/javascript</code> or <code>application/javascript; charset=utf-8</code> for JSONP response
</dd>
<dt>X-Total-Count</dt>
<dd>Total number of results for [pagination].
</dd>
<dt>Link</dt>
<dd>Links for [pagination].
</dd>
<dt>Access-Control-Expose-Headers</dt>
<dd>The value <code>Link X-Total-Count</code>
</dd>
<dt>Access-Control-Allow-Origin</dt>
<dd>The value <code>*</code> or another origin domain in response to a <code>Origin</code> request header.
</dd>
<dt>Allow</dt>
<dd>A list of supported HTTP verbs (<code>GET, HEAD, OPTIONS</code>) in response to OPTIONS requests or errors with status 405.
</dd>
</dl>
</section>
<section id="description-documents" class="level2">
<h2><span class="header-section-number">2.5</span> Description Documents</h2>
<p>A <strong>description document</strong> is a JSON object that describes properties and capabilities of a JSKOS API. A description document MUST be returned for HTTP GET requests at its base URL.</p>
<p>It SHOULD also be returned for HTTP OPTIONS requests at its base URL and core methods, except when request header <code>Origin</code> is included for a CORS preflight request.</p>
<p>A description document MUST contain the property <code>jskos-api</code> giving which version of this specification the API conforms to.</p>
<p>Description documents at core endpoints (concepts endpoint, schemes endpoint, types endpoint, mappings endpoint) MUST contain at least property <code>href</code> with an absolute or relative URI reference of the described method.</p>
<p>Other properties of description documents describe which optional features a JSKOS API supports.</p>
<p>A description document at base URL contains description documents for each supported core endpoints at properties <code>concepts</code>, <code>schemes</code>, <code>types</code>, and <code>mappings</code> respectively. The property <code>jskos-api</code> can be omitted in included description documents as it can be derived from the base document.</p>
<p><strong>Example</strong></p>
<p>The following description document returned for HTTP OPTIONS requests at <a href="https://example.org/jskos/concepts">https://example.org/jskos/concepts</a> all describe the same concepts method:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;concepts&quot;</span> <span class="fu">}</span> 
<span class="fu">{</span> <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;./concepts&quot;</span> <span class="fu">}</span> 
<span class="fu">{</span> <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;//example.org/jskos/concepts&quot;</span> <span class="fu">}</span> 
<span class="fu">{</span> <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.org/jskos/concepts&quot;</span> <span class="fu">}</span> </code></pre>
<p>A minimal description document for this service returned at the base URL <a href="https://example.org/jskos/">https://example.org/jskos/</a> would be:</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> 
  <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> 
  <span class="dt">&quot;concepts&quot;</span><span class="fu">:</span> <span class="fu">{</span>
    <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;concepts&quot;</span> 
  <span class="fu">}</span> 
<span class="fu">}</span></code></pre>
</section>
<section id="error-responses" class="level2">
<h2><span class="header-section-number">2.6</span> Error responses</h2>
<p>An error response body is a JSON document with properties <code>code</code>, <code>message</code>, and <code>description</code>.</p>
<p>…</p>
</section>
</section>
<section id="endpoints" class="level1">
<h1><span class="header-section-number">3</span> Endpoints</h1>
<ul>
<li><a href="#concepts">concepts endpoint</a></li>
<li><a href="#schemes">schemes endpoint</a></li>
<li><a href="#types">types endpoint</a></li>
<li><a href="#mappings">mappings endpoint</a></li>
</ul>
<p>Each endpoint supports a set of query parameters, which are combined as boolean AND (boolean OR is not supported).</p>
<p>Label properties and documentation properties can be localized by appending <code>.</code> and the language tag to the corresponding query parameter, e.g. <code>prefLabel.en=fox</code>.</p>
<div class="note">
Truncation of language tags has to be discussed. For instance should <code>prefLabel.en</code> also match language tag <code>en-GB</code>?
</div>
<section id="concepts" class="level2">
<h2><span class="header-section-number">3.1</span> Concepts</h2>
<p>A <strong>concepts endpoint</strong> provides information about concepts in JSKOS format.</p>
<section id="query-parameters" class="level3 unnumbered">
<h3>Query parameters</h3>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong> (full URIs)</li>
<li><strong><code>prefLabel</code></strong>, <strong><code>altLabel</code></strong>, <strong><code>hiddenLabel</code></strong></li>
<li><strong><code>label</code></strong> (any of <code>prefLabel</code>, <code>altLabel</code>, <code>hiddenLabel</code>)</li>
<li><strong><code>notation</code></strong></li>
<li><strong><code>broader</code></strong>, <strong><code>narrower</code></strong>, <strong><code>related</code></strong> (full URIs)</li>
<li><strong><code>note</code></strong> (any kind of note)</li>
<li><strong><code>scheme</code></strong> (inScheme URI)</li>
<li><strong><code>schemeNotation</code></strong></li>
</ul>
<p>The field name <code>label</code> can be used to refer to any of <code>prefLabel</code>, <code>altLabel</code>, and <code>hiddenLabel</code>. For instance <code>label=fox</code> can be used to search for concepts with any kind of label having the value “fox”. The name can also be localized e.g. <code>label.en=fox</code>.</p>
</section>
</section>
<section id="schemes" class="level2">
<h2><span class="header-section-number">3.2</span> Schemes</h2>
<p>A <strong>schemes endpoint</strong> provides information about concept schemes in JSKOS concept schemes format.</p>
<p>A schemes endpoint SHOULD at least return information about concept schemes that are references in concepts of a corresponding <a href="#concepts">concepts endpoint</a>.</p>
<section id="query-parameters-1" class="level3 unnumbered">
<h3>Query parameters</h3>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong></li>
<li><strong><code>prefLabel</code></strong>, <strong><code>altLabel</code></strong>, <strong><code>hiddenLabel</code></strong></li>
<li><strong><code>label</code></strong> (any of <code>prefLabel</code>, <code>altLabel</code>, <code>hiddenLabel</code>)</li>
<li><strong><code>notation</code></strong></li>
</ul>
<div class="note">
Concept schemes in JSKOS API are expressed in same terms as concepts to provide a unfiform access format.
</div>
</section>
</section>
<section id="types" class="level2">
<h2><span class="header-section-number">3.3</span> Types</h2>
<p>Concepts MAY have multiple types in addition to the implicit type “Concept” from SKOS ontology. A <strong>types endpoint</strong> provides information about concept types expressed as JSKOS concepts of their own.</p>
<p>A types endpoint SHOULD at least return information about concept types that are referenced in concepts of a corresponding concepts endpoint.</p>
<section id="query-parameters-2" class="level3 unnumbered">
<h3>Query parameters</h3>
<p>Query parameters are equivalent to query parameters of <a href="#concepts">concepts endpoint</a>.</p>
<div class="example">
<p>The following list contains three concept types for people, places, and subjects.</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="ot">[</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;concept&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;narrower&quot;</span><span class="fu">:</span> <span class="ot">[</span>
        <span class="st">&quot;http://example.org/types/people&quot;</span><span class="ot">,</span>
        <span class="st">&quot;http://example.org/types/places&quot;</span><span class="ot">,</span>
        <span class="st">&quot;http://example.org/types/subjects&quot;</span>
    <span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/people&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;people&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/places&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;places&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/subjects&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;subjects&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span>
<span class="ot">]</span></code></pre>
</div>
<div class="note">
Concept types in RDF are likely modelled with RDFS ontology properties. In JSKOS API these properties are mapped to JSKOS, and by this SKOS ontology (e.g. <code>rdfs:subClassOf</code> ⇒ <code>skos:broader</code>, <code>rdfs:label</code> ⇒ <code>skos:prefLabel</code>), to access concepts and concept types in a uniform format.
</div>
</section>
</section>
<section id="mappings" class="level2">
<h2><span class="header-section-number">3.4</span> Mappings</h2>
<p>A <strong>mappings endpoint</strong> provides information about concepts mappings in JSKOS mappings format.</p>
<p>Concepts and concept schemes referenced in concept mappings at a given mappings endpoint SHOUDL also be accessible via a corresponding <a href="#concepts">concepts endpoint</a> and <a href="#schemes">schemes endpoint</a>, respectively.</p>
<section id="query-parameters-3" class="level3 unnumbered">
<h3>Query parameters</h3>
<p>Mappings can be searched with query parameters, combined as boolean AND:</p>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong> and <strong><code>relevance</code></strong></li>
<li><strong><code>fromScheme</code></strong> and <strong><code>toScheme</code></strong> to select concept schemes by URI</li>
<li><strong><code>fromSchemeNotation</code></strong> and <strong><code>toSchemeNotation</code></strong> to select concept schemes by notation</li>
<li><strong><code>from</code></strong> and <strong><code>to</code></strong> to select concepts by URI</li>
<li><strong><code>fromNotation</code></strong> and <strong><code>toNotation</code></strong> to select concepts by notations</li>
<li><strong><code>fromType</code></strong> and <strong><code>toType</code></strong> to select concepts by type URI</li>
<li><strong><code>creator</code></strong>, <strong><code>publisher</code></strong>, <strong><code>contributor</code></strong>, <strong><code>source</code></strong>, <strong><code>provenance</code></strong>, <strong><code>dateAccepted</code></strong>, <strong><code>modified</code></strong>… for metadata about mappings</li>
</ul>
</section>
</section>
</section>
<section id="query-modifiers" class="level1">
<h1><span class="header-section-number">4</span> Query modifiers</h1>
<p>Some special URL query parameters control how a request is processed and returned.</p>
<section id="properties" class="level2">
<h2><span class="header-section-number">4.1</span> Properties</h2>
<p>All core endpoints MUST support the query parameter <strong><code>properties</code></strong>, expecting a comma-separated list of property names to be included in JSKOS response objects.</p>
<p>Examples:</p>
<pre><code>?properties=notation,prefLabel,altLabel,hiddenLabel
?properties=broader,narrower
...</code></pre>
<p>The property name <code>label</code> is a alias for <code>prefLabel,altLabel,hiddenLabel</code>.</p>
<p>The <code>uri</code> property SHOULD always be included in responses, if available.</p>
</section>
<section id="pagination" class="level2">
<h2><span class="header-section-number">4.2</span> Pagination</h2>
<p>The core endpoints can return multiple response items. The number of items returned can be controlled with request parameter <strong><code>limit</code></strong>. The default value SHOULD be 20. Paging can be controlled with request parameter <strong><code>page</code></strong>, starting with the default value <code>page=1</code>.</p>
<p>Links to previous, next, first, and last pages <em>must</em> be included in the HTTP <code>Link</code> header:</p>
<pre><code>Link: &lt;https://example.org/v1/schemes?page=2&amp;limit=20&gt;; rel=&quot;next&quot;,
      &lt;https://example.org/v1/schemes?page=2&amp;limit=3&gt;; rel=&quot;last&quot;,
      &lt;https://example.org/v1/schemes?limit=20&gt;; rel=&quot;first&quot;</code></pre>
<p>The total number of items should also be sent back with the HTTP Header <code>X-Total-Count</code>.</p>
<p>The special request parameter <strong><code>unique</code></strong> (set to any value but <code>0</code> or the empty string) can be used to transform a list result into either a single item (if total count is 1) or a HTTP 300 response:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">without <code>unique</code> (HTTP 200)</th>
<th style="text-align: left;">with <code>unique</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... } ]</code></td>
<td style="text-align: left;">{ … } (HTTP 200)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[ ]</code></td>
<td style="text-align: left;">error with HTTP 404</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... }, { ... } ... ]</code></td>
<td style="text-align: left;">error with HTTP 300</td>
</tr>
</tbody>
</table>
</section>
<section id="mediated-result-lists" class="level2">
<h2><span class="header-section-number">4.3</span> Mediated result lists</h2>
<p>To get the list of broader, narrower, or related concepts instead of the full concept, use parameter <strong><code>list</code></strong> with possible values <code>broader</code>, <code>narrower</code>, <code>related</code>.</p>
<p>…</p>
</section>
<section id="jskos-expansion-and-normalization" class="level2">
<h2><span class="header-section-number">4.4</span> JSKOS expansion and normalization</h2>
<p>…</p>
</section>
</section>
<section id="extensions" class="level1">
<h1><span class="header-section-number">5</span> Extensions</h1>
<p>A JSKOS-API MAY support the following extensions and propagate their support in [description document].</p>
<section id="truncation" class="level2">
<h2><span class="header-section-number">5.1</span> Truncation</h2>
<p>The search parameter <strong><code>truncate</code></strong> set to <code>truncate=right</code> enables right-truncation for all query parameters or for fixed set of query parameters (specified in [description document]) except URIs.</p>
<div class="example">
The query <code>?prefLabel=A&amp;inScheme=http://example.org/schemes/ABC&amp;truncate=right</code> at a concepts endpoint will return all concepts in concept scheme <code>http://example.org/schemes/ABC</code> with preferred label starting with letter “A”. Such concepts in concept scheme <code>http://example.org/schemes/ABCDE</code> will not be included.
</div>
<div class="note">
Name and value of this parameter may be changed in a later version to also support other query extensions (regular expressions, ranking…).
</div>
</section>
<section id="normalization" class="level2">
<h2><span class="header-section-number">5.2</span> Normalization</h2>
<p>When searching all strings must be Unicode normalized to not distinguish composed and decomposed characters sequences. The final JSON response <em>must</em> always be normalized in NFC.</p>
<p>Search normalization can be enforced with parameter <strong><code>fold</code></strong> expecting a comma-separated set with the following possible values:</p>
<ul>
<li><code>canonical</code> compares strings by canonical equivalence after NFKC. For instance ligature <code>ﬃ</code> is equivalent to <code>ffi</code>.</li>
<li><code>case</code> compares strings after conversion to uppercase.</li>
<li><code>canonical,case</code> to apply both</li>
<li><code>all</code> applies more character folding such as removal of accents. See applications of <a href="http://unicode.org/reports/tr30/">http://unicode.org/reports/tr30/</a> for examples and implementations. Language tags should be respected to fold differently depending on languages.</li>
</ul>
<p>Additional folding methids <em>may</em> be supported. For instance <code>mark</code> compares strings after NFKC and removing all characters in the categories Nonspacing Mark (Mn), Spacing Mark (Mc) and Enclosing Mark (Me), thus ignoring most accents and diacritics aka “accent folding”. See Unicode <a href="http://unicode.org/reports/tr44/#Property_Definitions">character properties</a> for possible criteria.</p>
<div class="note">
Basic support of Unicode normalization is likely to become mandatory in a later version of this specification.
</div>
<div class="example">
<p>The following example illustrates truncation and normalization:</p>
<pre><code>/concepts?prefLabel=weisskopf&amp;truncate=right&amp;fold=all

[ 
  {
    &quot;type&quot;: [&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;],
    &quot;prefLabel&quot;: {
      &quot;de&quot;: &quot;Weißköpfe&quot;
    }
  }
]</code></pre>
<p>The concept is found because</p>
<ul>
<li><code>prefLabel</code> also finds <code>prefLabel.de</code></li>
<li><code>fold=all</code> normalizes “Weißköpfe” to “WEISSKOPFE”</li>
<li><code>truncate=right</code> finds “WEISSKOPFE” if only “WEISSKOPF” was searched</li>
</ul>
</div>
</section>
<section id="utility-endpoints" class="level2">
<h2><span class="header-section-number">5.3</span> Utility endpoints</h2>
<p>A JSKOS API SHOULD support additional URL paths to simplify requests. These additional methods can all be mapped to the core endpoints, for instance with a HTTP proxy that can rewrite URL path and HTTP GET parameters.</p>
<ul>
<li><code>/schemes/{scheme}</code> = <code>/schemes?notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/topConcepts</code> = <code>/concepts?topConceptOf.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/types</code> = <code>/types?inScheme.notation={scheme}</code></li>
<li><code>/concepts/{notation}</code> = <code>/concepts?notation={notation}</code></li>
<li><code>/concepts/{notation}/narrower</code> = <code>/concepts?notation={notation}&amp;list=narrower</code></li>
<li><code>/concepts/{notation}/broader</code> = <code>/concepts?notation={notation}&amp;list=broader</code></li>
<li><code>/concepts/{notation}/related</code> = <code>/concepts?notation={notation}&amp;list=related</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/narrower</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=narrower</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/broader</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/related</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li>…</li>
</ul>
<p>Note that these utility URLs may problematic if notations contain <code>/</code>.</p>
</section>
<section id="restricted-access" class="level2">
<h2><span class="header-section-number">5.4</span> Restricted access</h2>
<p><em>Support of Simple Auth (token as username) &amp; OAuth 2 for restricted access…</em></p>
</section>
<section id="search-suggestions" class="level2">
<h2><span class="header-section-number">5.5</span> Search suggestions</h2>
<p><em>Support of OpenSearch Suggestions for typeahed (<code>list=suggest</code>)…</em></p>
</section>
<section id="reconciliation-service" class="level2">
<h2><span class="header-section-number">5.6</span> Reconciliation service</h2>
<p><em>Support of Reconciliations API…</em></p>
</section>
<section id="range-search" class="level2">
<h2><span class="header-section-number">5.7</span> Range search</h2>
<p><em>Support of <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> to search ranges for selected properties…</em></p>
</section>
<section id="geospatial-search" class="level2">
<h2><span class="header-section-number">5.8</span> Geospatial search</h2>
<p><em>Support of geospatial search…</em></p>
</section>
</section>
<section id="references" class="level1">
<h1><span class="header-section-number">6</span> References</h1>
<section id="normative-references" class="level2">
<h2><span class="header-section-number">6.1</span> Normative References</h2>
<ul>
<li><p>Bradner, S. 1997. “RFC 2119: Key words for use in RFCs to Indicate Requirement Levels”. <a href="http://tools.ietf.org/html/rfc2119">http://tools.ietf.org/html/rfc2119</a>.</p></li>
<li><p>Crockford, D. 2006. “RFC 6427: The application/json Media Type for JavaScript Object Notation (JSON)”. <a href="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</a>.</p></li>
<li><p>RFC 2396: “ Uniform Resource Identifiers (URI): Generic Syntax”. <a href="https://tools.ietf.org/html/rfc2396">https://tools.ietf.org/html/rfc2396</a>.</p></li>
<li><p>Fielding, R. 1999. “RFC 2616: Hypertext Transfer Protocol”. <a href="http://tools.ietf.org/html/rfc2616">http://tools.ietf.org/html/rfc2616</a>.</p></li>
<li><p>van Kesteren, Anne. 2014. “Cross-Origin Resource Sharing”. <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></p></li>
<li><p>Rescorla, E. 2000. “RFC 2818: HTTP over TLS”. <a href="http://tools.ietf.org/html/rfc2818">http://tools.ietf.org/html/rfc2818</a>.</p></li>
<li><p>Voß, J. 2015. “JSKOS data format for knowledge organization systems”. <a href="https://gbv.github.io/jskos/">https://gbv.github.io/jskos/</a>.</p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="informative-references" class="level2">
<h2><span class="header-section-number">6.2</span> Informative References</h2>
<ul>
<li><p>van Kesteren, A. 2014. “Cross-Origin Resource Sharing”. <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></p></li>
<li><p>Miles, A. and Bechhofer, S. 2009: “SKOS Reference”. W3C Recommendation. <a href="http://www.w3.org/TR/skos-reference">http://www.w3.org/TR/skos-reference</a></p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="revision-history" class="level2">
<h2><span class="header-section-number">6.3</span> Revision history</h2>
<p>This is version <strong>+15</strong> of JSKOS API specification, last modified at 2015-08-25 with revision <a href="https://github.com/gbv/jskos-apicommit/8c23e3c0da9037755657e77be3dd069ea91daf90">8c23e3c</a>.</p>
<p>Version numbers follow <a href="http://semver.org/">Semantic Versioning</a>: each number consists of three numbers, optionally followed by <code>+</code> and a suffix:</p>
<ul>
<li>The major version (first number) is increased if changes require a modification of JSKOS API clients</li>
<li>The minor version (second number) is increased if changes require a modification a JSKOS API servers</li>
<li>The patch version (third number) is increased for backwards compatible fixes or extensions, such as the introduction of new optional features</li>
<li>The optional suffix indicates informal changes in documentation</li>
</ul>
<section id="releases" class="level3 unnumbered">
<h3>Releases</h3>
<p>Releases with functional changes are tagged with a version number and included at <a href="https://github.com/gbv/jskos-api/releases">https://github.com/gbv/jskos-api/releases</a> with release notes.</p>
<section id="unpublished" class="level4 unnumbered">
<h4>0.0.0 (unpublished)</h4>
<p>The current version is an early draft so it has not been tagged as release yet.</p>
</section>
</section>
<section id="full-changelog" class="level3 unnumbered">
<h3>Full changelog</h3>
<ul>
<li><a href="jskos-api-8c23e3c.html"><code>2015-08-25 11:00:44 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/8c23e3c0da9037755657e77be3dd069ea91daf90">major extension</a></li>
<li><a href="jskos-api-139df61.html"><code>2015-08-20 14:16:02 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/139df618c44d6573f7f092b4e4c2eac6c04dacd6">extended README to specification</a></li>
<li><a href="jskos-api-baf509e.html"><code>2015-07-15 16:37:16 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/baf509eb187d7d8c23dd1bc810cf43189bc4e39a">mapping query parameters</a></li>
<li><a href="jskos-api-ebf2e05.html"><code>2015-03-19 14:45:34 +0100</code></a>: <a href="https://github.com/gbv/jskos-apicommit/ebf2e05f263072843f0eaaf0ebe789a1504ef48a">Redesign</a></li>
<li><a href="jskos-api-f34af19.html"><code>2015-03-13 13:18:28 +0100</code></a>: <a href="https://github.com/gbv/jskos-apicommit/f34af198d6d257a8949e0dfeb7f3e81e517e33f3">extended specification</a></li>
</ul>
</section>
</section>
</section>
</body>
</html>
