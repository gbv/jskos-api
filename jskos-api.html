<!DOCTYPE html>
<html lang="de_DE">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß" />
  <meta name="date" content="2015-08-20" />
  <title>JSKOS API Specification</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
  <link rel="stylesheet" href="makespec.css" />
</head>
<body>
<a href="https://github.com/gbv/jskos-api"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">JSKOS API Specification</h1>
<h3 class="author">Jakob Voß</h3>
<h4 class="date">2015-08-20 (version +13)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#basics"><span class="toc-section-number">2</span> Basics</a></li>
<li><a href="#request-methods"><span class="toc-section-number">3</span> Request methods</a><ul>
<li><a href="#core-methods"><span class="toc-section-number">3.1</span> Core methods</a></li>
<li><a href="#utility-methods"><span class="toc-section-number">3.2</span> Utility methods</a></li>
</ul></li>
<li><a href="#http-headers"><span class="toc-section-number">4</span> HTTP headers</a><ul>
<li><a href="#request-headers">Request headers</a></li>
<li><a href="#response-headers">Response headers</a></li>
</ul></li>
<li><a href="#request-parameters"><span class="toc-section-number">5</span> Request parameters</a><ul>
<li><a href="#properties"><span class="toc-section-number">5.1</span> Properties</a></li>
<li><a href="#pagination"><span class="toc-section-number">5.2</span> Pagination</a></li>
</ul></li>
<li><a href="#search-parameters"><span class="toc-section-number">6</span> Search parameters</a><ul>
<li><a href="#schemes"><span class="toc-section-number">6.1</span> Schemes</a></li>
<li><a href="#concepts"><span class="toc-section-number">6.2</span> Concepts</a></li>
<li><a href="#types"><span class="toc-section-number">6.3</span> Types</a></li>
<li><a href="#mappings"><span class="toc-section-number">6.4</span> Mappings</a></li>
<li><a href="#truncation"><span class="toc-section-number">6.5</span> Truncation</a></li>
<li><a href="#normalization"><span class="toc-section-number">6.6</span> Normalization</a></li>
</ul></li>
<li><a href="#references"><span class="toc-section-number">7</span> References</a><ul>
<li><a href="#normative-references"><span class="toc-section-number">7.1</span> Normative References</a></li>
<li><a href="#informative-references"><span class="toc-section-number">7.2</span> Informative References</a></li>
<li><a href="#revision-history"><span class="toc-section-number">7.3</span> Revision history</a><ul>
<li><a href="#releases">Releases</a></li>
<li><a href="#full-changelog">Full changelog</a></li>
</ul></li>
</ul></li>
<li><a href="#examples">Examples</a></li>
</ul>
</nav>
<section id="introduction" class="level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This document describes an experimental JSON-API to access controlled vocabularies (also known as knowledge organization systems) in <a href="http://gbv.github.io/jskos/">JSKOS</a> format.</p>
<p>The specification is hosted in a public git repository at <a href="https://github.com/gbv/jskos-api">https://github.com/gbv/jskos-api</a>. Comments and contributions are welcome!</p>
<p>JSKOS-API is being defined as part of project <a href="https://coli-conc.gbv.de">coli-conc</a>. The current version is an early draft.</p>
</section>
<section id="basics" class="level1">
<h1><span class="header-section-number">2</span> Basics</h1>
<ul>
<li>HTTPS GET requests only (a later version may also support write operations)</li>
<li>JSON content type only, based on <a href="http://gbv.github.io/jskos/">JSKOS</a> format.</li>
<li>support CORS and optionally JSONP (<code>callback</code> parameter)</li>
<li><em>should</em> pretty-print JSON and gzip compression by default</li>
<li><em>may</em> support Simple Auth (token as username) or OAuth 2 for restricted access</li>
<li>HTTP error responses must return a JSON document as response body with fields <code>code</code>, <code>message</code>, and <code>description</code>.</li>
</ul>
</section>
<section id="request-methods" class="level1">
<h1><span class="header-section-number">3</span> Request methods</h1>
<p>A JSKOS API endpoint <em>may</em> support <a href="#additional-methods">additional methods</a> which can all be implemented based on the core methods.</p>
<p>The endpoint MUST return a JSON document with the following optional fields:</p>
<ul>
<li><code>concepts</code></li>
<li><code>schemes</code></li>
<li><code>types</code></li>
<li><code>mappings</code></li>
<li>…</li>
</ul>
<p>and the following mandatory fields</p>
<ul>
<li><code>title</code></li>
<li><code>version</code></li>
</ul>
<section id="core-methods" class="level2">
<h2><span class="header-section-number">3.1</span> Core methods</h2>
<ul>
<li><code>/concepts</code></li>
<li><code>/schemes</code></li>
<li><code>/types</code></li>
<li><code>/mappings</code></li>
</ul>
</section>
<section id="utility-methods" class="level2">
<h2><span class="header-section-number">3.2</span> Utility methods</h2>
<p>A JSKOS API <em>should</em> support additional URL paths to simplify requests. These additional methods can all be mapped to the core methods, for instance with a HTTP proxy that can rewrite URL path and HTTP GET parameters.</p>
<ul>
<li><code>/schemes/{scheme}</code> = <code>/schemes?notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/topConcepts</code> = <code>/concepts?topConceptOf.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/types</code> = <code>/types?inScheme.notation={scheme}</code></li>
<li><code>/concepts/{notation}</code> = <code>/concepts?notation={notation}</code></li>
<li><code>/concepts/{notation}/narrower</code> = <code>/concepts?notation={notation}&amp;list=narrower</code></li>
<li><code>/concepts/{notation}/broader</code> = <code>/concepts?notation={notation}&amp;list=broader</code></li>
<li><code>/concepts/{notation}/related</code> = <code>/concepts?notation={notation}&amp;list=related</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/narrower</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=narrower</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/broader</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/related</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li>…</li>
</ul>
<p>Note that these utility URLs may problematic if notations contain <code>/</code>.</p>
<p>In addition (TODO):</p>
<ul>
<li><code>/suggest</code> - search with OpenSearch suggestions return format (requires truncation) = <code>list=suggest</code></li>
<li>…</li>
</ul>
</section>
</section>
<section id="http-headers" class="level1">
<h1><span class="header-section-number">4</span> HTTP headers</h1>
<section id="request-headers" class="level2 unnumbered">
<h2>Request headers</h2>
<p>…</p>
</section>
<section id="response-headers" class="level2 unnumbered">
<h2>Response headers</h2>
<p>…</p>
<dl>
<dt>Content-Type</dt>
<dd>..
</dd>
<dt>X-Total-Count</dt>
<dd>…
</dd>
<dt>Link</dt>
<dd>…
</dd>
<dt>Access-Control-Expose-Headers</dt>
<dd>The value <code>Link X-Total-Count</code>
</dd>
<dt>Access-Control-Allow-Origin</dt>
<dd>The value <code>*</code> or another origin domain in response to a <code>Origin</code> request header.
</dd>
</dl>
<p>…</p>
</section>
</section>
<section id="request-parameters" class="level1">
<h1><span class="header-section-number">5</span> Request parameters</h1>
<section id="properties" class="level2">
<h2><span class="header-section-number">5.1</span> Properties</h2>
<p>All request methods <em>must</em> support the query parameter <strong><code>properties</code></strong>, expecting a comma-separated list of property names to be included in JSKOS response objects.</p>
<p>Examples:</p>
<pre><code>?properties=notation,prefLabel,altLabel,hiddenLabel
?properties=broader,narrower
...</code></pre>
<p>The property name <code>label</code> is a alias for <code>prefLabel,altLabel,hiddenLabel</code>.</p>
<p>The <code>uri</code> property <em>should</em> always be included in responses, if available.</p>
</section>
<section id="pagination" class="level2">
<h2><span class="header-section-number">5.2</span> Pagination</h2>
<p>The requests methods <code>/schemes</code>, <code>/schemes/{scheme}/types</code>, and <code>/schemes/{scheme}/concepts</code> can return multiple response items. The number of items returned can be controlled with request parameter <strong><code>limit</code></strong>. The default value <em>should</em> be 20. Paging can be controlled with request parameter <strong><code>page</code></strong>, starting with the default value <code>page=1</code>.</p>
<p>Links to previous, next, first, and last pages <em>must</em> be included in the HTTP <code>Link</code> header:</p>
<pre><code>Link: &lt;https://example.org/v1/schemes?page=2&amp;limit=20&gt;; rel=&quot;next&quot;,
      &lt;https://example.org/v1/schemes?page=2&amp;limit=3&gt;; rel=&quot;last&quot;,
      &lt;https://example.org/v1/schemes?limit=20&gt;; rel=&quot;first&quot;</code></pre>
<p>The total number of items should also be sent back with the HTTP Header <code>X-Total-Count</code>.</p>
<p>The special request parameter <strong><code>unique</code></strong> (set to any value but <code>0</code> or the empty string) can be used to transform a list result into either a single item (if total count is 1) or a HTTP 300 response:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">without <code>unique</code> (HTTP 200)</th>
<th style="text-align: left;">with <code>unique</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... } ]</code></td>
<td style="text-align: left;">{ … } (HTTP 200)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[ ]</code></td>
<td style="text-align: left;">error with HTTP 404</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... }, { ... } ... ]</code></td>
<td style="text-align: left;">error with HTTP 300</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="search-parameters" class="level1">
<h1><span class="header-section-number">6</span> Search parameters</h1>
<section id="schemes" class="level2">
<h2><span class="header-section-number">6.1</span> Schemes</h2>
<p>…</p>
</section>
<section id="concepts" class="level2">
<h2><span class="header-section-number">6.2</span> Concepts</h2>
<p>Search via query parameters, combined as boolean AND (boolean OR is not supported). Concept search supports the following concept properties:</p>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>prefLabel</code></strong>, <strong><code>altLabel</code></strong>, <strong><code>hiddenLabel</code></strong></li>
<li><strong><code>label</code></strong> (any of <code>prefLabel</code>, <code>altLabel</code>, <code>hiddenLabel</code>)</li>
<li><strong><code>notation</code></strong></li>
<li><strong><code>type</code></strong> (full URIs)</li>
<li><strong><code>broader</code></strong>, <strong><code>narrower</code></strong>, <strong><code>related</code></strong> (values must be full URIs)</li>
<li><strong><code>note</code></strong> (any kind of note)</li>
<li><strong><code>inScheme</code></strong> (URI)</li>
<li><strong><code>inScheme.notation</code></strong></li>
</ul>
<p>Label properties and documentation properties can be localized by appending <code>.</code> and the language tag, e.g. <code>prefLabel.en=fox</code>.</p>
<p>The field name <code>label</code> can be used to refer to any of <code>prefLabel</code>, <code>altLabel</code>, and <code>hiddenLabel</code>. For instance <code>label=fox</code> can be used to search for concepts with any kind of label having the value “fox”. The name can also be localized e.g. <code>label.en=fox</code>.</p>
<p>To get the list of broader, narrower, or related concepts instead of the full concept, use parameter <strong><code>list</code></strong> with possible values <code>broader</code>, <code>narrower</code>, <code>related</code>.</p>
</section>
<section id="types" class="level2">
<h2><span class="header-section-number">6.3</span> Types</h2>
<p>The <code>/types</code> endpoint returns a list of concept types, each represented as JSKOS Concept. The default type <code>skos:Concept</code> may be omitted. Search parameters are equivalent to concept search parameters except <code>type</code> is not allowed.</p>
</section>
<section id="mappings" class="level2">
<h2><span class="header-section-number">6.4</span> Mappings</h2>
<p>Mappings can be searched with query parameters, combined as boolean AND:</p>
<ul>
<li><strong><code>fromScheme</code></strong> and <strong><code>toScheme</code></strong> to select concept schemes by URI</li>
<li><strong><code>fromSchemeNotation</code></strong> and <strong><code>toSchemeNotation</code></strong> to select concept schemes by notation</li>
<li><strong><code>from</code></strong> and <strong><code>to</code></strong> to select concepts by URI</li>
<li><strong><code>fromNotation</code></strong> and <strong><code>toNotation</code></strong> to select concepts by notations</li>
<li><strong><code>fromType</code></strong> and <strong><code>toType</code></strong> to select concepts by type URI</li>
<li><strong><code>creator</code></strong>, <strong><code>publisher</code></strong>, <strong><code>contributor</code></strong>, <strong><code>source</code></strong>, <strong><code>provenance</code></strong>… for mapping metadata</li>
<li>…</li>
</ul>
</section>
<section id="truncation" class="level2">
<h2><span class="header-section-number">6.5</span> Truncation</h2>
<p>The search parameter <strong><code>truncate</code></strong> set to <code>truncate=right</code> enables right-truncation for all query parameters except URIs.</p>
</section>
<section id="normalization" class="level2">
<h2><span class="header-section-number">6.6</span> Normalization</h2>
<p>When searching all strings must be Unicode normalized to not distinguish composed and decomposed characters sequences. The final JSON response <em>must</em> always be normalized in NFC.</p>
<p>Search normalization can be enforced with parameter <strong><code>fold</code></strong> expecting a comma-separated set with the following possible values:</p>
<ul>
<li><code>canonical</code> compares strings by canonical equivalence after NFKC. For instance ligature <code>ﬃ</code> is equivalent to <code>ffi</code>.</li>
<li><code>case</code> compares strings after conversion to uppercase.</li>
<li><code>canonical,case</code> to apply both</li>
<li><code>all</code> applies more character folding such as removal of accents. See applications of <a href="http://unicode.org/reports/tr30/">http://unicode.org/reports/tr30/</a> for examples and implementations. Language tags should be respected to fold differently depending on languages.</li>
</ul>
<p>Additional folding methids <em>may</em> be supported. For instance <code>mark</code> compares strings after NFKC and removing all characters in the categories Nonspacing Mark (Mn), Spacing Mark (Mc) and Enclosing Mark (Me), thus ignoring most accents and diacritics aka “accent folding”. See Unicode <a href="http://unicode.org/reports/tr44/#Property_Definitions">character properties</a> for possible criteria.</p>
</section>
</section>
<section id="references" class="level1">
<h1><span class="header-section-number">7</span> References</h1>
<section id="normative-references" class="level2">
<h2><span class="header-section-number">7.1</span> Normative References</h2>
<ul>
<li><p>Bradner, S. 1997. “RFC 2119: Key words for use in RFCs to Indicate Requirement Levels”. <a href="http://tools.ietf.org/html/rfc2119">http://tools.ietf.org/html/rfc2119</a>.</p></li>
<li><p>Crockford, D. 2006. “RFC 6427: The application/json Media Type for JavaScript Object Notation (JSON)”. <a href="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</a>.</p></li>
<li><p>Fielding, R. 1999. “RFC 2616: Hypertext Transfer Protocol”. <a href="http://tools.ietf.org/html/rfc2616">http://tools.ietf.org/html/rfc2616</a>.</p></li>
<li><p>van Kesteren, Anne. 2014. “Cross-Origin Resource Sharing”. <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></p></li>
<li><p>Rescorla, E. 2000. “RFC 2818: HTTP over TLS”. <a href="http://tools.ietf.org/html/rfc2818">http://tools.ietf.org/html/rfc2818</a>.</p></li>
<li><p>Voß, J. 2015. “JSKOS data format for knowledge organization systems”. <a href="https://gbv.github.io/jskos/">https://gbv.github.io/jskos/</a>.</p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="informative-references" class="level2">
<h2><span class="header-section-number">7.2</span> Informative References</h2>
<p>…</p>
</section>
<section id="revision-history" class="level2">
<h2><span class="header-section-number">7.3</span> Revision history</h2>
<p>This is version <strong>+13</strong> of JSKOS-API specification, last modified at 2015-08-20 with revision <a href="https://github.com/gbv/jskos-apicommit/139df618c44d6573f7f092b4e4c2eac6c04dacd6">139df61</a>.</p>
<p>Version numbers follow <a href="http://semver.org/">Semantic Versioning</a>: each number consists of three numbers, optionally followed by <code>+</code> and a suffix:</p>
<ul>
<li>The major version (first number) is increased if changes require a modification of PAIA clients</li>
<li>The minor version (second number) is increased if changes require a modification a PAIA servers</li>
<li>The patch version (third number) is increased for backwards compatible fixes or extensions, such as the introduction of new optional fields</li>
<li>The optional suffix indicates informal changes in documentation</li>
</ul>
<section id="releases" class="level3 unnumbered">
<h3>Releases</h3>
<p>Releases with functional changes are tagged with a version number and included at <a href="https://github.com/gbv/jskos-api/releases">https://github.com/gbv/jskos-api/releases</a> with release notes.</p>
<section id="unpublished" class="level4 unnumbered">
<h4>0.0.0 (unpublished)</h4>
<p>The current version is an early draft so it has not been tagged as release yet.</p>
</section>
</section>
<section id="full-changelog" class="level3 unnumbered">
<h3>Full changelog</h3>
<ul>
<li><a href="jskos-api-139df61.html"><code>2015-08-20 14:16:02 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/139df618c44d6573f7f092b4e4c2eac6c04dacd6">extended README to specification</a></li>
<li><a href="jskos-api-baf509e.html"><code>2015-07-15 16:37:16 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/baf509eb187d7d8c23dd1bc810cf43189bc4e39a">mapping query parameters</a></li>
<li><a href="jskos-api-ebf2e05.html"><code>2015-03-19 14:45:34 +0100</code></a>: <a href="https://github.com/gbv/jskos-apicommit/ebf2e05f263072843f0eaaf0ebe789a1504ef48a">Redesign</a></li>
<li><a href="jskos-api-f34af19.html"><code>2015-03-13 13:18:28 +0100</code></a>: <a href="https://github.com/gbv/jskos-apicommit/f34af198d6d257a8949e0dfeb7f3e81e517e33f3">extended specification</a></li>
</ul>
</section>
</section>
</section>
<section id="examples" class="level1 unnumbered">
<h1>Examples</h1>
<p>The following example illustrates truncation and normalization:</p>
<pre><code>/concepts?prefLabel=weisskopf&amp;truncate=right&amp;fold=all

[ 
  {
    &quot;type&quot;: [&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;],
    &quot;prefLabel&quot;: {
      &quot;de&quot;: &quot;Weißköpfe&quot;
    }
  }
]</code></pre>
<p>The concept is found because</p>
<ul>
<li><code>prefLabel</code> also finds <code>prefLabel.de</code></li>
<li><code>fold=all</code> normalizes “Weißköpfe” to “WEISSKOPFE”</li>
<li><code>truncate=right</code> finds “WEISSKOPFE” if only “WEISSKOPF” was searched</li>
</ul>
</section>
</body>
</html>
