<!DOCTYPE html>
<html lang="de_DE">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jakob Voß" />
  <meta name="date" content="2015-09-21" />
  <title>JSKOS API Specification</title>
   <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
/*<![CDATA[*/
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
/*]]>*/
  </style>
  <style type="text/css">
  body { font-family: sans-serif; }
  a { text-decoration: none }
  a:hover { text-decoration: underline }
  h1 { font: 170% sans-serif }
  h1.title { font-size: 200%; font-weight: bold; }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  dt { font-weight: bold; }
  h1, h2, h3, h1 a, h2 a, h3 a { color: #005A9C; }
  table { border-collapse: collapse; }
  td { border: 1px solid #999; padding: 3px }
  dl p { margin-top: 0; }
  dt { margin-top: 0.8em; }
  dd { margin-left: 1.5em; }
  ol { margin-bottom: 1em; }
  table + p { margin-top: 1em; }
  </style>
  <link rel="stylesheet" href="makespec.css" />
</head>
<body>
<a href="https://github.com/gbv/jskos-api"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>
<h1 class="title">JSKOS API Specification</h1>
<h3 class="author">Jakob Voß</h3>
<h4 class="date">2015-09-21 (version 0.0.0+4)</h4>
</header>

<h1>Table of Contents</h1>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#synopsis"><span class="toc-section-number">1.1</span> Synopsis</a></li>
<li><a href="#status-of-this-document"><span class="toc-section-number">1.2</span> Status of this document</a></li>
<li><a href="#conformance-requirements"><span class="toc-section-number">1.3</span> Conformance requirements</a></li>
</ul></li>
<li><a href="#request-and-response-format"><span class="toc-section-number">2</span> Request and response format</a><ul>
<li><a href="#basics"><span class="toc-section-number">2.1</span> Basics</a></li>
<li><a href="#url-query-fields"><span class="toc-section-number">2.2</span> URL query fields</a></li>
<li><a href="#http-headers"><span class="toc-section-number">2.3</span> HTTP headers</a></li>
<li><a href="#service-description"><span class="toc-section-number">2.4</span> Service description</a></li>
<li><a href="#error-responses"><span class="toc-section-number">2.5</span> Error responses</a></li>
</ul></li>
<li><a href="#request-endpoints"><span class="toc-section-number">3</span> Request endpoints</a><ul>
<li><a href="#concepts"><span class="toc-section-number">3.1</span> Concepts</a></li>
<li><a href="#schemes"><span class="toc-section-number">3.2</span> Schemes</a></li>
<li><a href="#types"><span class="toc-section-number">3.3</span> Types</a></li>
<li><a href="#mappings"><span class="toc-section-number">3.4</span> Mappings</a></li>
</ul></li>
<li><a href="#query-modifiers"><span class="toc-section-number">4</span> Query modifiers</a><ul>
<li><a href="#language-qualifiers"><span class="toc-section-number">4.1</span> Language qualifiers</a></li>
<li><a href="#properties"><span class="toc-section-number">4.2</span> Properties</a></li>
<li><a href="#pagination"><span class="toc-section-number">4.3</span> Pagination</a></li>
<li><a href="#unique"><span class="toc-section-number">4.4</span> unique</a></li>
<li><a href="#jsonp"><span class="toc-section-number">4.5</span> JSONP</a></li>
<li><a href="#jskos-normalization"><span class="toc-section-number">4.6</span> JSKOS normalization</a></li>
<li><a href="#jskos-expansion"><span class="toc-section-number">4.7</span> JSKOS expansion</a></li>
</ul></li>
<li><a href="#extensions"><span class="toc-section-number">5</span> Extensions</a><ul>
<li><a href="#mediated-result-lists"><span class="toc-section-number">5.1</span> Mediated result lists</a></li>
<li><a href="#matching-operators"><span class="toc-section-number">5.2</span> Matching operators</a></li>
<li><a href="#character-folding"><span class="toc-section-number">5.3</span> Character folding</a></li>
<li><a href="#utility-endpoints"><span class="toc-section-number">5.4</span> Utility endpoints</a></li>
<li><a href="#restricted-access"><span class="toc-section-number">5.5</span> Restricted access</a></li>
<li><a href="#search-suggestions"><span class="toc-section-number">5.6</span> Search suggestions</a></li>
<li><a href="#reconciliation-service"><span class="toc-section-number">5.7</span> Reconciliation service</a></li>
<li><a href="#range-search"><span class="toc-section-number">5.8</span> Range search</a></li>
<li><a href="#geospatial-search"><span class="toc-section-number">5.9</span> Geospatial search</a></li>
<li><a href="#write-operations"><span class="toc-section-number">5.10</span> Write operations</a></li>
</ul></li>
<li><a href="#references"><span class="toc-section-number">6</span> References</a><ul>
<li><a href="#normative-references"><span class="toc-section-number">6.1</span> Normative References</a></li>
<li><a href="#informative-references"><span class="toc-section-number">6.2</span> Informative References</a></li>
<li><a href="#revision-history"><span class="toc-section-number">6.3</span> Revision history</a></li>
</ul></li>
</ul>
</nav>
<section id="introduction" class="level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This document specified <strong>JSKOS API</strong>, an experimental JSON-API to access controlled vocabularies, also known as knowledge organization systems, or taxonomies, expressed in <a href="https://gbv.github.io/jskos/">JSKOS</a> format.</p>
<section id="synopsis" class="level2">
<h2><span class="header-section-number">1.1</span> Synopsis</h2>
<p>A JSKOS API consists of a base URL and a set of <a href="#request-endpoints">request endpoints</a> to query <a href="#concepts">concepts</a>, <a href="#schemes">concept schemes</a>, <a href="#types">concept types</a>, and <a href="#mappings">concept mappings</a> in <a href="https://gbv.github.io/jskos/">JSKOS</a> format.</p>
</section>
<section id="status-of-this-document" class="level2">
<h2><span class="header-section-number">1.2</span> Status of this document</h2>
<div class="note">
The current version of JSKOS API specification is a very early draft!
</div>
<p>JSKOS API is being defined as part of project <a href="https://coli-conc.gbv.de">coli-conc</a>.</p>
<p>The specification is hosted in a public git repository at <a href="https://github.com/gbv/jskos-api">https://github.com/gbv/jskos-api</a>. Comments and contributions are welcome!</p>
</section>
<section id="conformance-requirements" class="level2">
<h2><span class="header-section-number">1.3</span> Conformance requirements</h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>
</section>
</section>
<section id="request-and-response-format" class="level1">
<h1><span class="header-section-number">2</span> Request and response format</h1>
<section id="basics" class="level2">
<h2><span class="header-section-number">2.1</span> Basics</h2>
<p>A JSKOS API service MUST respond to HTTP GET, HEAD, and OPTIONS requests. The response body MUST be valid JSON or empty. A JSON response body SHOULD be pretty-printed. A JSON response MUST be one of</p>
<ul>
<li>a <a href="#service-description">service description</a> or endpoint description</li>
<li>a <a href="http://gbv.github.io/jskos/">JSKOS</a> object (concept, concept scheme, or mapping) or an array of JSKOS objects,</li>
<li>an <a href="#error-responses">error response</a></li>
</ul>
<p>A JSKOS API service SHOULD provide a base URL to request a <a href="#service-description">service description</a>, a set of <a href="#request-endpoints">request endpoints</a>, and optional <a href="#utility-endpoints">utility endpoints</a>.</p>
<p>Endpoints MUST be queried via with HTTP GET with optional URL query fields. Each URL query field is one of</p>
<ul>
<li>query parameter (depending on the request endpoint)</li>
<li><a href="#query-modifiers">query modifier</a></li>
</ul>
</section>
<section id="url-query-fields" class="level2">
<h2><span class="header-section-number">2.2</span> URL query fields</h2>
</section>
<section id="http-headers" class="level2">
<h2><span class="header-section-number">2.3</span> HTTP headers</h2>
<section id="request-headers" class="level3 unnumbered">
<h3>Request headers</h3>
<p>The following HTTP request headers SHOULD be included in requests to JSKOS API:</p>
<dl>
<dt>Accept</dt>
<dd>The value <code>application/json</code>
</dd>
<dt>User-Agent</dt>
<dd>An appropriate client name and version number
</dd>
<dt>Accept-Language</dt>
<dd><em>See <a href="https://github.com/gbv/jskos-api/issues/2">https://github.com/gbv/jskos-api/issues/2</a> for discussion!</em>
</dd>
</dl>
<p>A OPTIONS preflight request for Cross-Origin Resource Sharing (CORS) MUST include the cross-origin request headers:</p>
<dl>
<dt>Origin</dt>
<dd>Where the cross-origin request originates from
</dd>
<dt>Access-Control-Request-Method</dt>
<dd>The HTTP verb of the actual request (GET or OPTIONS)
</dd>
</dl>
</section>
<section id="response-headers" class="level3 unnumbered">
<h3>Response headers</h3>
<p>A JSKOS API MUST support the following HTTP response headers:</p>
<dl>
<dt>Content-Type</dt>
<dd>The value <code>application/json</code> or <code>application/json; charset=utf-8</code> for JSON response; the value <code>application/javascript</code> or <code>application/javascript; charset=utf-8</code> for JSONP response
</dd>
<dt>X-Total-Count</dt>
<dd>Total number of results if the response body is a JSON array (see <a href="#pagination">pagination</a> for details).
</dd>
<dt>Link</dt>
<dd>Links for <a href="#pagination">pagination</a> if the response body is a JSON array.
</dd>
<dt>Access-Control-Expose-Headers</dt>
<dd>The value <code>Link X-Total-Count</code>
</dd>
<dt>Access-Control-Allow-Origin</dt>
<dd>The value <code>*</code> or another origin domain in response to a <code>Origin</code> request header.
</dd>
<dt>Allow</dt>
<dd>A list of supported HTTP verbs (<code>GET, HEAD, OPTIONS</code>) in response to a OPTIONS request or with an <a href="#error-responses">error response</a> with status code 405.
</dd>
</dl>
</section>
</section>
<section id="service-description" class="level2">
<h2><span class="header-section-number">2.4</span> Service description</h2>
<p>A JSKOS API service SHOULD provide a <strong>base URL</strong>. A service description MUST be returned at the base URL for HTTP GET requests. and it SHOULD be returned for HTTP OPTIONS requests. A JSKOS API service SHOULD return a service description for HTTP OPTIONS requests at <a href="#request-endpoints">request endpoints</a>.</p>
<p>A <strong>service description</strong> is a JSON object that describes properties and capabilities of a JSKOS API service with the following fields:</p>
<ul>
<li><strong><code>jskosapi</code></strong> (mandatory) which version of this specification the service conforms to</li>
<li><strong><code>title</code></strong> (optional) human-readable name of the service</li>
</ul>
<p>A service description returned at base URL SHOULD include endpoint descriptions with the fields <code>concepts</code>, <code>schemes</code>, <code>types</code>, and <code>mappings</code> if available.</p>
<p>An <strong>endpoint description</strong> is a JSON object with the following fields:</p>
<ul>
<li><strong><code>href</code></strong> (mandatory) absolute or relative URI reference of the described method.</li>
<li><strong><code>title</code></strong> (optional) human-readable name of the endpoint</li>
</ul>
<div class="note">
Later versions of this specification will include support of <a href="#extensions">extensions</a> and optional features in service descriptions and endpoint descriptions.
</div>
<div class="example">
<p>The following service description returned at a base URL <a href="https://example.org/jskos/">https://example.org/jskos/</a> includes an endpoint description of a <a href="#concepts">concepts endpoint</a> at <a href="https://example.org/jskos/concepts">https://example.org/jskos/concepts</a> and <a href="#types">types endpoint</a> at <a href="https://example.org/jskos/types">https://example.org/jskos/types</a>.</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> 
   <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> 
   <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Funny Terminology Server&quot;</span><span class="fu">,</span>
   <span class="dt">&quot;concepts&quot;</span><span class="fu">:</span> <span class="fu">{</span> 
     <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;./concepts&quot;</span><span class="fu">,</span>
     <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Funny Concepts&quot;</span>
   <span class="fu">},</span>
   <span class="dt">&quot;types&quot;</span><span class="fu">:</span> <span class="fu">{</span> 
     <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;./types&quot;</span><span class="fu">,</span>
     <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Funny Concept Types&quot;</span>
   <span class="fu">}</span>

<span class="fu">}</span> </code></pre>
<p>The concept URL could also be specified as <code>./concepts</code>, <code>//example.org/jskos/concepts</code>, or <code>https://example.org/jskos/concepts</code>. An HTTP OPTIONS request at this URL returns at least</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="fu">{</span> 
   <span class="dt">&quot;jskos-api&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span> 
   <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Funny Terminology Server&quot;</span><span class="fu">,</span>
   <span class="dt">&quot;concepts&quot;</span><span class="fu">:</span> <span class="fu">{</span> 
     <span class="dt">&quot;href&quot;</span><span class="fu">:</span> <span class="st">&quot;./concepts&quot;</span><span class="fu">,</span>
     <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Funny Concepts&quot;</span>
   <span class="fu">}</span>
<span class="fu">}</span></code></pre>
</div>
</section>
<section id="error-responses" class="level2">
<h2><span class="header-section-number">2.5</span> Error responses</h2>
<p>Error responses with HTTP status code 4xx (client error) or 5xx (server error) SHOULD be returned with a JSON object response body having the following fields:</p>
<ul>
<li><strong><code>code</code></strong> (REQUIRED) the HTTP status error code.</li>
<li><strong><code>error</code></strong> (REQUIRED) a custom error code. Allowed characters include <code>a-z</code>, <code>0-9</code> and underscore (<code>_</code>).</li>
<li><strong><code>message</code></strong> (OPTIONAL) a human-readable error message. Intended to be shown to an end user.</li>
<li><strong><code>error_description</code></strong> (OPTIONAL) a human-readable error description. Intended for a developer, not an end user.</li>
<li><strong><code>error_uri</code></strong> (OPTIONAL) a URL of a human-readable web page with information about the error.</li>
</ul>
<p>The response headers SHOULD include a <code>Content-Language</code> header to indicate the language of human-readable message and description. The <code>Accept-Language</code> request header SHOULD be used to select a language if multiple languages are supported.</p>
</section>
</section>
<section id="request-endpoints" class="level1">
<h1><span class="header-section-number">3</span> Request endpoints</h1>
<p>A JSKOS API service SHOULD provide URLs as</p>
<ul>
<li><a href="#concepts">concepts endpoint</a></li>
<li><a href="#schemes">schemes endpoint</a></li>
<li><a href="#types">types endpoint</a></li>
<li><a href="#mappings">mappings endpoint</a></li>
</ul>
<p>Each endpoint supports a set of query parameters, which are combined as boolean AND.</p>
<section id="concepts" class="level2">
<h2><span class="header-section-number">3.1</span> Concepts</h2>
<p>A <strong>concepts endpoint</strong> provides information about concepts in JSKOS format.</p>
<section id="query-parameters" class="level3 unnumbered">
<h3>Query parameters</h3>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong> (full URIs)</li>
<li><strong><code>prefLabel</code></strong>, <strong><code>altLabel</code></strong>, <strong><code>hiddenLabel</code></strong></li>
<li><strong><code>label</code></strong> (any of <code>prefLabel</code>, <code>altLabel</code>, <code>hiddenLabel</code>)</li>
<li><strong><code>notation</code></strong></li>
<li><strong><code>broader</code></strong>, <strong><code>narrower</code></strong>, <strong><code>related</code></strong> (full URIs)</li>
<li><strong><code>note</code></strong> (any kind of note)</li>
<li><strong><code>scheme</code></strong> (inScheme URI)</li>
<li><strong><code>schemeNotation</code></strong></li>
</ul>
<p>The field name <code>label</code> can be used to refer to any of <code>prefLabel</code>, <code>altLabel</code>, and <code>hiddenLabel</code>. For instance <code>label=fox</code> can be used to search for concepts with any kind of label having the value “fox”. The name can also be localized e.g. <code>label.en=fox</code>.</p>
</section>
</section>
<section id="schemes" class="level2">
<h2><span class="header-section-number">3.2</span> Schemes</h2>
<p>A <strong>schemes endpoint</strong> provides information about concept schemes in JSKOS concept schemes format.</p>
<p>A schemes endpoint SHOULD at least return information about concept schemes that are referenced in concepts of a corresponding <a href="#concepts">concepts endpoint</a>.</p>
<section id="query-parameters-1" class="level3 unnumbered">
<h3>Query parameters</h3>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong></li>
<li><strong><code>prefLabel</code></strong>, <strong><code>altLabel</code></strong>, <strong><code>hiddenLabel</code></strong></li>
<li><strong><code>label</code></strong> (any of <code>prefLabel</code>, <code>altLabel</code>, <code>hiddenLabel</code>)</li>
<li><strong><code>notation</code></strong></li>
</ul>
<div class="note">
Concept schemes in JSKOS API are expressed in same terms as concepts to provide a uniform access format.
</div>
</section>
</section>
<section id="types" class="level2">
<h2><span class="header-section-number">3.3</span> Types</h2>
<p>Concepts MAY have multiple types in addition to the implicit type “Concept” from SKOS ontology. A <strong>types endpoint</strong> provides information about concept types expressed as JSKOS concepts of their own.</p>
<p>A types endpoint SHOULD at least return information about concept types that are referenced in concepts of a corresponding concepts endpoint. The default type <code>http://www.w3.org/2004/02/skos/core#Concept</code> MAY be omitted.</p>
<section id="query-parameters-2" class="level3 unnumbered">
<h3>Query parameters</h3>
<p>Query parameters are equivalent to query parameters of <a href="#concepts">concepts endpoint</a>.</p>
<div class="example">
<p>The following list contains three concept types for people, places, and subjects.</p>
<pre class="sourceCode json"><code class="sourceCode json"><span class="ot">[</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;concept&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;narrower&quot;</span><span class="fu">:</span> <span class="ot">[</span>
        <span class="st">&quot;http://example.org/types/people&quot;</span><span class="ot">,</span>
        <span class="st">&quot;http://example.org/types/places&quot;</span><span class="ot">,</span>
        <span class="st">&quot;http://example.org/types/subjects&quot;</span>
    <span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/people&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;people&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/places&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;places&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span><span class="ot">,</span>
  <span class="fu">{</span>
    <span class="dt">&quot;uri&quot;</span><span class="fu">:</span> <span class="st">&quot;http://example.org/types/subjects&quot;</span><span class="fu">,</span>
    <span class="dt">&quot;prefLabel&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;en&quot;</span><span class="fu">:</span> <span class="st">&quot;subjects&quot;</span> <span class="fu">},</span>
    <span class="dt">&quot;broader&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;</span><span class="ot">]</span>
  <span class="fu">}</span>
<span class="ot">]</span></code></pre>
</div>
<div class="note">
Concept types in RDF are likely modelled with RDFS ontology properties. In JSKOS API these properties are mapped to JSKOS, and by this SKOS ontology (e.g. <code>rdfs:subClassOf</code> ⇒ <code>skos:broader</code>, <code>rdfs:label</code> ⇒ <code>skos:prefLabel</code>), to access concepts and concept types in a uniform format.
</div>
</section>
</section>
<section id="mappings" class="level2">
<h2><span class="header-section-number">3.4</span> Mappings</h2>
<p>A <strong>mappings endpoint</strong> provides information about concepts mappings in JSKOS mappings format.</p>
<p>Concepts and concept schemes referenced in concept mappings at a given mappings endpoint SHOUDL also be accessible via a corresponding <a href="#concepts">concepts endpoint</a> and <a href="#schemes">schemes endpoint</a>, respectively.</p>
<section id="query-parameters-3" class="level3 unnumbered">
<h3>Query parameters</h3>
<p>Mappings can be searched with query parameters, combined as boolean AND:</p>
<ul>
<li><strong><code>uri</code></strong></li>
<li><strong><code>type</code></strong> and <strong><code>relevance</code></strong></li>
<li><strong><code>fromScheme</code></strong> and <strong><code>toScheme</code></strong> to select concept schemes by URI</li>
<li><strong><code>fromSchemeNotation</code></strong> and <strong><code>toSchemeNotation</code></strong> to select concept schemes by notation</li>
<li><strong><code>from</code></strong> and <strong><code>to</code></strong> to select concepts by URI</li>
<li><strong><code>fromNotation</code></strong> and <strong><code>toNotation</code></strong> to select concepts by notations</li>
<li><strong><code>fromType</code></strong> and <strong><code>toType</code></strong> to select concepts by type URI</li>
<li><strong><code>creator</code></strong>, <strong><code>publisher</code></strong>, <strong><code>contributor</code></strong>, <strong><code>source</code></strong>, <strong><code>provenance</code></strong>, <strong><code>dateAccepted</code></strong>, <strong><code>modified</code></strong>… for metadata about mappings</li>
</ul>
</section>
</section>
</section>
<section id="query-modifiers" class="level1">
<h1><span class="header-section-number">4</span> Query modifiers</h1>
<p>The following URL query fields control how a request is processed and returned. They can be used at all <a href="#request-endpoints">request endpoints</a> and <a href="#utility-endpoints">utility endpoints</a> unless noted otherwise.</p>
<ul>
<li><a href="#properties"><code>properties</code></a></li>
<li><a href="#pagination"><code>limit</code>, <code>page</code>, <code>unique</code></a></li>
<li><a href="#jsonp"><code>callback</code></a></li>
</ul>
<p>JSKOS properties with datatype language map (<code>prefLabel</code>, <code>altLabel</code>, <code>scopeNote</code>…) can further be qualified by <a href="#language-qualifiers">language qualifiers</a>.</p>
<p>Additional query modifiers MAY be supported by <a href="#extensions">extensions</a>.</p>
<section id="language-qualifiers" class="level2">
<h2><span class="header-section-number">4.1</span> Language qualifiers</h2>
<p>Label properties and documentation properties by default refer to any language (JSKOS language range “<code>-</code>”). The query can be limited to selected languages by appending a dot (“<code>.</code>”) and a language tag or JSKOS language range to the query parameter.</p>
<div class="examples"
```
prefLabel=fox       # ... (any language)
prefLabel.en=fox    # en
prefLabel.en-=fox   # en-GB, en-US, ..
```
</div>

<div class="note">
Should support of language ranges better be an optional extension? See <a href="https://github.com/gbv/jskos-api/issues/10">https://github.com/gbv/jskos-api/issues/10</a> for discussion.
</div>
</section>
<section id="properties" class="level2">
<h2><span class="header-section-number">4.2</span> Properties</h2>
<p>The <strong><code>properties</code></strong> query field MUST be supported to allow selection of object properties in JSKOS response objects. The value of this field is a comma-separated list of property names. Unknown property names SHOULD be ignored. The <code>uri</code> property SHOULD always be included in response objects, if available, no matter if included in the properties field or not.</p>
<p>The property name <code>label</code> is a alias for <code>prefLabel,altLabel,hiddenLabel</code>.</p>
<p>The empty string MUST be interpreted equal to no <code>properties</code> field. A <a href="#service-description">service description</a> SHOULD include the set of default properties returned if no <code>properties</code> field is given.</p>
<div class="example">
<pre><code>?properties=notation,prefLabel,altLabel,hiddenLabel
?properties=broader,narrower
...</code></pre>
</div>
<div class="note">
See also <a href="https://github.com/gbv/jskos-api/issues/4">https://github.com/gbv/jskos-api/issues/4</a> for discussion of JSKOS expansion with this query field.
</div>
</section>
<section id="pagination" class="level2">
<h2><span class="header-section-number">4.3</span> Pagination</h2>
<p>The core endpoints can return multiple response items. The number of items returned can be controlled with request parameter <strong><code>limit</code></strong>. The default value SHOULD be 20. Paging can be controlled with request parameter <strong><code>page</code></strong>, starting with the default value <code>page=1</code>.</p>
<p>Links to previous, next, first, and last pages MUST be included in the HTTP <code>Link</code> header:</p>
<pre><code>Link: &lt;https://example.org/v1/schemes?page=2&amp;limit=20&gt;; rel=&quot;next&quot;,
      &lt;https://example.org/v1/schemes?page=2&amp;limit=3&gt;; rel=&quot;last&quot;,
      &lt;https://example.org/v1/schemes?limit=20&gt;; rel=&quot;first&quot;</code></pre>
<p>The total number of items SHOULD also be sent back with the HTTP Header <code>X-Total-Count</code>.</p>
</section>
<section id="unique" class="level2">
<h2><span class="header-section-number">4.4</span> unique</h2>
<p>The special request parameter <strong><code>unique</code></strong> (set to any value but <code>0</code> or the empty string) can be used to transform a list result into either a single item (if total count is 1) or a HTTP 300 response:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">without <code>unique</code> (HTTP 200)</th>
<th style="text-align: left;">with <code>unique</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... } ]</code></td>
<td style="text-align: left;">{ … } (HTTP 200)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>[ ]</code></td>
<td style="text-align: left;">error with HTTP 404</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>[ { ... }, { ... } ... ]</code></td>
<td style="text-align: left;">error with HTTP 300</td>
</tr>
</tbody>
</table>
</section>
<section id="jsonp" class="level2">
<h2><span class="header-section-number">4.5</span> JSONP</h2>
<p>The <strong><code>callback</code></strong> parameter makes the JSON response body wrapped in a callback function.</p>
<div class="note">
<p>Clients SHOULD prefer CORS over JSONP if needed.</p>
</section>
<section id="jskos-normalization" class="level2">
<h2><span class="header-section-number">4.6</span> JSKOS normalization</h2>
<p>A JSKOS-API service MUST return normalized JSKOS. See <a href="https://github.com/gbv/jskos/issues/16">https://github.com/gbv/jskos/issues/16</a> and <a href="https://github.com/gbv/jskos-api/issues/5">https://github.com/gbv/jskos-api/issues/5</a> for discussion.</p>
</section>
<section id="jskos-expansion" class="level2">
<h2><span class="header-section-number">4.7</span> JSKOS expansion</h2>
<p>See <a href="https://github.com/gbv/jskos-api/issues/18">https://github.com/gbv/jskos-api/issues/18</a> for discussion.</p>
</section>
</section>
<section id="extensions" class="level1">
<h1><span class="header-section-number">5</span> Extensions</h1>
<p>A JSKOS-API MAY support the following extensions and propagate their support in <a href="#service-description">service description</a>.</p>
<section id="mediated-result-lists" class="level2">
<h2><span class="header-section-number">5.1</span> Mediated result lists</h2>
<p>To get the list of broader, narrower, or related concepts instead of the full concept, use query modification parameter <strong><code>list</code></strong> with possible values <code>broader</code>, <code>narrower</code>, <code>related</code>, <code>ancestors</code>.</p>
<p>See <a href="https://github.com/gbv/jskos-api/issues/17">https://github.com/gbv/jskos-api/issues/17</a> for discussion.</p>
</section>
<section id="matching-operators" class="level2">
<h2><span class="header-section-number">5.2</span> Matching operators</h2>
<p>By default all query field must fully match (possibly after <a href="#character-folding">character folding</a>). Selected query parameters can be modified to search substring or even regular expressions (specified in <a href="#service-description">service description</a>).</p>
<ul>
<li><code>name=foo</code> (exact match)</li>
<li><code>name^=foo</code> (at the beginning)</li>
<li><code>name*=foo</code> (anywhere)</li>
<li><code>name~=foo</code> (regular expression)</li>
</ul>
<p>Extensions MAY introduce additional matching operators</p>
<div class="example">
The query <code>?prefLabel^=A&amp;inScheme=http://example.org/schemes/ABC</code> at a concepts endpoint will return all concepts in concept scheme <code>http://example.org/schemes/ABC</code> with preferred label starting with letter “A”.
</div>
<div class="note">
Name and value of this parameter may be changed in a later version to also support other query extensions (regular expressions, ranking…). See <a href="https://github.com/gbv/jskos-api/issues/11">https://github.com/gbv/jskos-api/issues/11</a> for discussion.
</div>
</section>
<section id="character-folding" class="level2">
<h2><span class="header-section-number">5.3</span> Character folding</h2>
<p>When searching all strings must be Unicode normalized to not distinguish composed and decomposed characters sequences. The final JSON response <em>must</em> always be normalized in NFC.</p>
<p>Character folding can be enforced with parameter <strong><code>fold</code></strong> expecting a comma-separated set with the following possible values:</p>
<ul>
<li><code>canonical</code> compares strings by canonical equivalence after NFKC. For instance ligature <code>ﬃ</code> is equivalent to <code>ffi</code>.</li>
<li><code>case</code> compares strings after conversion to uppercase.</li>
<li><code>canonical,case</code> to apply both</li>
<li><code>accent</code> …</li>
<li><code>all</code> applies more character folding such as removal of accents. See applications of <a href="http://unicode.org/reports/tr30/">http://unicode.org/reports/tr30/</a> for examples and implementations. Language tags should be respected to fold differently depending on languages.</li>
</ul>
<p>Additional folding methids <em>may</em> be supported. For instance <code>mark</code> compares strings after NFKC and removing all characters in the categories Nonspacing Mark (Mn), Spacing Mark (Mc) and Enclosing Mark (Me), thus ignoring most accents and diacritics aka “accent folding”. See Unicode <a href="http://unicode.org/reports/tr44/#Property_Definitions">character properties</a> for possible criteria.</p>
<div class="note">
Basic support of character folding is likely to become mandatory in a later version of this specification. See <a href="https://github.com/gbv/jskos-api/issues/7">https://github.com/gbv/jskos-api/issues/7</a> for discussion.
</div>
<div class="example">
<p>The following example illustrates matching operator and character folding:</p>
<pre><code>/concepts?prefLabel^=weisskopf&amp;fold=all

[ 
  {
    &quot;type&quot;: [&quot;http://www.w3.org/2004/02/skos/core#Concept&quot;],
    &quot;prefLabel&quot;: {
      &quot;de&quot;: &quot;Weißköpfe&quot;
    }
  }
]</code></pre>
<p>The concept is found because</p>
<ul>
<li><code>prefLabel</code> also finds <code>prefLabel.de</code></li>
<li><code>fold=all</code> normalizes “Weißköpfe” to “WEISSKOPFE”</li>
<li><code>prefLabel^=</code> also finds “WEISSKOPFE” if only “WEISSKOPF” was searched</li>
</ul>
</div>
</section>
<section id="utility-endpoints" class="level2">
<h2><span class="header-section-number">5.4</span> Utility endpoints</h2>
<p>A JSKOS API SHOULD support additional URL paths to simplify requests. These additional methods can all be mapped to the core <a href="#request-endpoints">request endpoints</a>, for instance with a HTTP proxy that can rewrite URL path and HTTP GET parameters.</p>
<ul>
<li><code>/schemes/{scheme}</code> = <code>/schemes?notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/topConcepts</code> = <code>/concepts?topConceptOf.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/types</code> = <code>/types?inScheme.notation={scheme}</code></li>
<li><code>/concepts/{notation}</code> = <code>/concepts?notation={notation}</code></li>
<li><code>/concepts/{notation}/narrower</code> = <code>/concepts?notation={notation}&amp;list=narrower</code></li>
<li><code>/concepts/{notation}/broader</code> = <code>/concepts?notation={notation}&amp;list=broader</code></li>
<li><code>/concepts/{notation}/related</code> = <code>/concepts?notation={notation}&amp;list=related</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}</code> = <code>/concepts?inScheme.notation={scheme}</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/narrower</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=narrower</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/broader</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li><code>/schemes/{scheme}/concepts/{notation}/related</code> = <code>/concepts?inScheme.notation={scheme}&amp;notation={notation}&amp;list=broader</code></li>
<li>…</li>
</ul>
<p>Note that these utility URLs may problematic if notations contain <code>/</code>.</p>
</section>
<section id="restricted-access" class="level2">
<h2><span class="header-section-number">5.5</span> Restricted access</h2>
<div class="note">
Support of Simple Auth (token as username) &amp; OAuth 2 for restricted access…
</div>
</section>
<section id="search-suggestions" class="level2">
<h2><span class="header-section-number">5.6</span> Search suggestions</h2>
<div class="note">
Support of OpenSearch Suggestions for typeahed (<code>list=suggest</code>)… See <a href="https://github.com/gbv/jskos-api/issues/12">https://github.com/gbv/jskos-api/issues/12</a> for discussion.
</div>
</section>
<section id="reconciliation-service" class="level2">
<h2><span class="header-section-number">5.7</span> Reconciliation service</h2>
<div class="note">
Support of Reconciliations API…
</div>
</section>
<section id="range-search" class="level2">
<h2><span class="header-section-number">5.8</span> Range search</h2>
<div class="note">
Support of <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code> to search ranges for selected properties…
</div>
</section>
<section id="geospatial-search" class="level2">
<h2><span class="header-section-number">5.9</span> Geospatial search</h2>
<div class="note">
Support of geospatial search…
</div>
</section>
<section id="write-operations" class="level2">
<h2><span class="header-section-number">5.10</span> Write operations</h2>
<div class="note">
Support of write-operations with HTTP POST, PUT, DELETE…
</div>
</section>
</section>
<section id="references" class="level1">
<h1><span class="header-section-number">6</span> References</h1>
<section id="normative-references" class="level2">
<h2><span class="header-section-number">6.1</span> Normative References</h2>
<ul>
<li><p>Bradner, S. 1997. “RFC 2119: Key words for use in RFCs to Indicate Requirement Levels”. <a href="http://tools.ietf.org/html/rfc2119">http://tools.ietf.org/html/rfc2119</a>.</p></li>
<li><p>Crockford, D. 2006. “RFC 6427: The application/json Media Type for JavaScript Object Notation (JSON)”. <a href="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</a>.</p></li>
<li><p>RFC 2396: “ Uniform Resource Identifiers (URI): Generic Syntax”. <a href="https://tools.ietf.org/html/rfc2396">https://tools.ietf.org/html/rfc2396</a>.</p></li>
<li><p>Fielding, R. 1999. “RFC 2616: Hypertext Transfer Protocol”. <a href="http://tools.ietf.org/html/rfc2616">http://tools.ietf.org/html/rfc2616</a>.</p></li>
<li><p>van Kesteren, Anne. 2014. “Cross-Origin Resource Sharing”. <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></p></li>
<li><p>Rescorla, E. 2000. “RFC 2818: HTTP over TLS”. <a href="http://tools.ietf.org/html/rfc2818">http://tools.ietf.org/html/rfc2818</a>.</p></li>
<li><p>Voß, J. 2015. “JSKOS data format for knowledge organization systems”. <a href="https://gbv.github.io/jskos/">https://gbv.github.io/jskos/</a>.</p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="informative-references" class="level2">
<h2><span class="header-section-number">6.2</span> Informative References</h2>
<ul>
<li><p>van Kesteren, A. 2014. “Cross-Origin Resource Sharing”. <a href="http://www.w3.org/TR/cors/">http://www.w3.org/TR/cors/</a></p></li>
<li><p>Miles, A. and Bechhofer, S. 2009: “SKOS Reference”. W3C Recommendation. <a href="http://www.w3.org/TR/skos-reference">http://www.w3.org/TR/skos-reference</a></p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="revision-history" class="level2">
<h2><span class="header-section-number">6.3</span> Revision history</h2>
<p>This is version <strong>0.0.0+4</strong> of JSKOS API specification, last modified at 2015-09-21 with revision <a href="https://github.com/gbv/jskos-apicommit/9550fca3de0e5c9a4fa5f64454be6889df2ad4f2">9550fca</a>.</p>
<p>Version numbers follow <a href="http://semver.org/">Semantic Versioning</a>: each number consists of three numbers, optionally followed by <code>+</code> and a suffix:</p>
<ul>
<li>The major version (first number) is increased if changes require a modification of JSKOS API client</li>
<li>The minor version (second number) is increased if changes require a modification a JSKOS API services</li>
<li>The patch version (third number) is increased for backwards compatible fixes or extensions, such as the introduction of new optional features</li>
<li>The optional suffix indicates informal changes in documentation</li>
</ul>
<div class="note">
As long as major version is 0, changes requiring modification of JSKOS API clients may also be indicated by increasing the minor version number!
</div>
<section id="releases" class="level3 unnumbered">
<h3>Releases</h3>
<p>Releases with functional changes are tagged with a version number and included at <a href="https://github.com/gbv/jskos-api/releases">https://github.com/gbv/jskos-api/releases</a> with release notes.</p>
<section id="section" class="level4 unnumbered">
<h4>0.1.0</h4>
<p>Semi-stable pre-release.</p>
</section>
</section>
<section id="full-changelog" class="level3 unnumbered">
<h3>Full changelog</h3>
<ul>
<li><a href="jskos-api-9550fca.html"><code>2015-09-21 13:12:19 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/9550fca3de0e5c9a4fa5f64454be6889df2ad4f2">Rename normalization and trunction</a></li>
<li><a href="jskos-api-9349195.html"><code>2015-09-21 12:57:33 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/93491955bc7836dfdc69940e02cdb8853cb5144c">Remove duplicated ‘list’ extension</a></li>
<li><a href="jskos-api-1132276.html"><code>2015-09-21 12:53:47 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/1132276752ec69ed8b4406bc1a88fe6904651655">Make language search a query modifier</a></li>
<li><a href="jskos-api-ea1b0bd.html"><code>2015-09-21 12:31:44 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/ea1b0bdae31c589a0daed54acf56e8e5f1b5bb7d">Resort extensions</a></li>
<li><a href="jskos-api-5660da0.html"><code>2015-08-25 14:20:01 +0200</code></a>: <a href="https://github.com/gbv/jskos-apicommit/5660da02d95354ce4a80df7c29e20f848bc2a236">finished basic cleanup</a></li>
</ul>
</section>
</section>
</section>
</body>
</html>
